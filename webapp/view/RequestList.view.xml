<mvc:View controllerName="com.bmc.hcm.erf.controller.RequestList" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.f.semantic"
	xmlns:footerbar="sap.ushell.ui.footerbar" busy="{requestListView>/busy}" busyIndicatorDelay="100">
	<Page showFooter="true" showHeader="true" floatingFooter="true" showNavButton="true" navButtonPress="onNavBack"
		title="{i18n>EMPLOYEE_REQUEST_FORM_LIST}" class="erfListPage">
		<IconTabBar id="idIconTabBar" select="onIconFilterSelect" stretchContentHeight="true">
			<items>
				<IconTabFilter icon="sap-icon://save" iconColor="Neutral" count="{requestListView>/searchResults/DRF}" text="{i18n>DRAFT_REQUESTS}"
					key="DRF"/>
				<IconTabFilter icon="sap-icon://pending" iconColor="Critical" count="{requestListView>/searchResults/PND}" text="{i18n>PENDING_REQUESTS}"
					key="PND"/>
				<IconTabFilter icon="sap-icon://accept" iconColor="Positive" count="{requestListView>/searchResults/APP}" text="{i18n>APPROVED_REQUESTS}"
					key="APP"/>
				<IconTabFilter icon="sap-icon://decline" iconColor="Negative" count="{requestListView>/searchResults/REJ}" text="{i18n>REJECTED_REQUESTS}"
					key="REJ"/>
				<IconTabSeparator/>
				<IconTabFilter icon="sap-icon://checklist" count="{requestListView>/searchResults/ALL}" text="{i18n>ALL_REQUESTS}" key="ALL"/>
			</items>
			<content>
				<Table id="idEmployeeRequestTable" width="auto"
					items="{ path: '/EmployeeRequestFormSet',filters : [ { path : 'Erfap', operator : 'EQ', value1 : 'MY_REQUESTS'}, { path : 'Erfsf', operator : 'EQ', value1 : 'DRF'} ] }"
					noDataText="{requestListView>/tableNoDataText}" busyIndicatorDelay="{requestListView>/tableBusyDelay}" growing="true"
					growingScrollToLoad="true" updateFinished="onUpdateFinished" updateStarted="onUpdateStarted" class="erfTable">
					<headerToolbar>
						<Toolbar>
							<ToolbarSpacer/>
							<SearchField id="searchField" placeholder="{i18n>REQUEST_SEARCH_TOOLTIP}" search="onSearch"
								width="{= ${device>/system/phone} ? '100%' : '50%' }"></SearchField>
						</Toolbar>
					</headerToolbar>
					<infoToolbar>
						<Toolbar>
							<Title id="tableHeader" text="{requestListView>/requestListTableTitle}"/>
						</Toolbar>
					</infoToolbar>
					<columns>
						<Column id="idRequestNumberColumn">
							<Text text="{i18n>ERF_NUMBER}"/>
						</Column>
						<Column id="idPositionColumn">
							<Text text="{i18n>POSITION}"/>
						</Column>
						<Column id="idRequestReasonColumn">
							<Text text="{i18n>REQUEST_REASON}"/>
						</Column>
						<Column id="idRequiredQualificationColumn" minScreenWidth="Desktop">
							<Text text="{i18n>REQUIRED_QUALIFICATION_TR}"/>
						</Column>
						<Column id="idJobDescriptionColumn" minScreenWidth="Desktop">
							<Text text="{i18n>JOB_DESCRIPTION_TR}"/>
						</Column>
						<Column id="idRequestDateColumn" minScreenWidth="Tablet" demandPopin="true">
							<Text text="{i18n>REQUEST_DATE}"/>
						</Column>
						<Column id="idRequestStatusColumn" minScreenWidth="Tablet" demandPopin="true">
							<Text text="{i18n>REQUEST_STATUS}"/>
						</Column>
						<Column id="idRequestOnWhoColumn" minScreenWidth="Desktop" demandPopin="true">
							<Text text="{i18n>REQUEST_ON_WHO}"/>
						</Column>
						<Column id="idActionsColumn" minScreenWidth="Tablet" width="5rem" hAlign="Center">
							<Text text="{i18n>ACTION_LIST}"/>
						</Column>
					</columns>
					<items>
						<ColumnListItem type="Navigation" press="onPress">
							<cells>
								<ObjectIdentifier title="{Erfno}"/>
								<Text text="{= ${Nopln} ? ${Plaft} : ${Plstx} }"/>
								<Text text="{Erfrx}"/>
								<Text text="{ErfrqTr}" wrapping="true" maxLines="3"
								tooltip="{ErfrqTr}"/>
								<Text text="{ErfjdTr}" wrapping="true" maxLines="3"
								tooltip="{ErfjdTr}"/>
								<Text
									text="{ path: 'Rqdat', type: 'sap.ui.model.type.Date', formatOptions: { pattern:'dd.MM.yyyy'} } - { path: 'Rqtim', type: 'sap.ui.model.odata.type.Time', formatOptions: { pattern:'HH:mm'} }"/>
								<Text text="{ parts: [ {path: 'Erfsx' }, {path: 'Erfsy' }], formatter: '.formatter.getStatusText' }"/>
								<Text text="{Frone}"/>
								<Button icon="sap-icon://menu" type="Accept" press="onAvailableRequestActions" tooltip="{i18n>ACTION_LIST}"
									visible="{ path:'Erfsf', formatter: '.onCheckActionAvailable'}" class="erfActionButton"></Button>
							</cells>
						</ColumnListItem>
					</items>
				</Table>
			</content>
		</IconTabBar>
		<footer>
			<OverflowToolbar>
				<ToolbarSpacer/>
				<Button text="{i18n>NEW_EMPLOYEE_REQUEST_BUTTON}" tooltip="{i18n>NEW_EMPLOYEE_REQUEST_BUTTON_TOOLTIP}" icon="sap-icon://add-employee"
					press="onNewEmployeeRequest" type="Accept" visible="{requestListView>/newRequestButtonVisible}"/>
			</OverflowToolbar>
		</footer>
	</Page>
</mvc:View>